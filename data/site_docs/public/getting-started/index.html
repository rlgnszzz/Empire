<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Getting started - Empire Docs</title>
    <meta name="generator" content="Hugo 0.31.1" />

    
    <meta name="description" content="Building a cross platform Empire with PowerShell/Python.">
    
    <link rel="canonical" href="https://example.org/getting-started/">
    
    <meta name="author" content="EmpireProject">
    

    <meta property="og:url" content="https://example.org/getting-started/">
    <meta property="og:title" content="Empire Docs">
    <meta property="og:image" content="https://example.org/images/empire-logo.png">
    <meta name="apple-mobile-web-app-title" content="Empire Docs">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://example.org/images/empire-logo.png">
    <link rel="icon" type="image/x-icon" href="https://example.org/images/empire-logo.png">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://example.org/fonts/icon.eot');
        src: url('https://example.org/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://example.org/fonts/icon.woff')
               format('woff'),
             url('https://example.org/fonts/icon.ttf')
               format('truetype'),
             url('https://example.org/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://example.org/stylesheets/application.css">
    <link rel="stylesheet" href="https://example.org/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://example.org/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://example.org/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="https://example.org/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-blue palette-accent-blue">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Getting started
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/empireproject" title="@empireproject on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://github.com/EmpireProject/Empire" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://example.org/images/empire-logo.png">
        </div>
      
      <div class="name">
        <strong>Empire Docs <span class="version">2.3</span></strong>
        
          <br>
          EmpireProject/Empire
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="https://github.com/EmpireProject/Empire/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/EmpireProject/Empire/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Introduction" href="https://example.org/">
	
	Introduction
</a>



  
</li>



<li>
  
    



<a class="current" title="Getting started" href="https://example.org/getting-started/">
	
	Getting started
</a>


<ul id="scrollspy">
</ul>


  
</li>



<li>
  
    



<a  title="Overview" href="https://example.org/overview/">
	
	Overview
</a>



  
</li>



<li>
  
    



<a  title="Empire Core" href="https://example.org/empire-core/">
	
	Empire Core
</a>



  
</li>



<li>
  
    



<a  title="OSX Modules" href="https://example.org/osx-modules/">
	
	OSX Modules
</a>



  
</li>



<li>
  
    



<a  title="Linux Modules" href="https://example.org/linux-modules/">
	
	Linux Modules
</a>



  
</li>



<li>
  
    



<a  title="PowerShell Modules" href="https://example.org/powershell-modules/">
	
	PowerShell Modules
</a>



  
</li>



<li>
  
    



<a  title="REST API" href="https://example.org/rest-api/">
	
	REST API
</a>



  
</li>



<li>
  
    



<a  title="Roadmap" href="https://example.org/roadmap/">
	
	Roadmap
</a>



  
</li>



<li>
  
    



<a  title="License" href="https://example.org/license/">
	
	License
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          

          
          <li>
            <a href="https://github.com/empireproject" target="_blank" title="@empireproject on GitHub">
              @empireproject on GitHub
            </a>
          </li>
          

          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Getting started </h1>

			

<h2 id="supported-platforms">Supported Platforms</h2>

<p>We only support a few base platforms at this time:</p>

<ul>
<li>Debian / Kali</li>
<li>Ubuntu LTS</li>
<li>Fedora</li>
</ul>

<h2 id="initial-setup">Initial Setup</h2>

<p>Run the <strong>./setup/install.sh</strong> script. This will install the few dependencies and run the <strong>./setup/setup_database.py</strong> script. The setup_database.py file contains various setting that you can manually modify, and then initializes the ./data/empire.db backend database. No additional configuration should be needed- hopefully everything works out of the box.</p>

<p>Running <code>./empire</code> will start Empire, and <code>./empire --debug</code> will generate a verbose debug log at .<strong>/empire.debug</strong>. Running <code>./empire --debug 2</code> will provide verbose output to empire console. The included <strong>./setup/reset.sh</strong> will reset/reinitialize the database and launch Empire in debug mode. There&rsquo;s also a detailed &ldquo;Empire Tips and Tricks&rdquo; <a href="http://enigma0x3.net/2015/08/26/empire-tips-and-tricks/">post up here</a>.</p>

<h2 id="docker-setup">Docker Setup</h2>

<p>A major benefit to using docker is reducing the need to handle package management and allowing you to easily upgrade between releases of Empire. If you are unfamiliar with Docker I highly recommend the Quick start tutorial. There are two different ways of using Docker for Empire, the first being using Docker-Hub to pull images.</p>

<h3 id="docker-pull-setup">Docker Pull Setup</h3>

<p>Simply use the following command, this will pull the <code>latest</code> image/version from the hub. In total after all compiled libs and src it currently sits at 400MB compressed:</p>

<pre><code>docker pull empireproject/empire
</code></pre>

<p>Once your image has been pulled down to the local host, we need setup a persistent storage volume to prevent the loss of data between stoping and starting. One of the powerful parts of Docker is now you have a base/clean image to always work off and all you need to do is pull the newest image and run with our mounted volume. To do this we must create the volume:</p>

<pre><code>docker create -v /opt/Empire --name data empireproject/empire
</code></pre>

<p>Now to run the container we simply run in interactive mode, this may change in the future but seems to be the simplest method to ensure maximum usability.</p>

<pre><code>docker run -ti --volumes-from data empireproject/empire bash
</code></pre>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This will enable only &ldquo;Local&rdquo; networking and wont allow you to bind to the host networking. This is great for local testing etc.. but NOT ideal for production of course.</p>
</div>

<p>To fix this issue we simply expose a range of ports and map them 1:1:</p>

<pre><code>docker run -ti --volumes-from data -p 80:80 empireproject/empire bash
</code></pre>

<p>or</p>

<pre><code>docker run -ti --volumes-from data -p 80-443:80-443 empireproject/empire bash
</code></pre>

<p>Finally since we have a fresh new image all we need to do is simply start our new DB, and required PKI. We do this by simply running the <code>reset.sh</code> script:</p>

<pre><code>root@e7059c42661b:/opt/Empire/setup# ./reset.sh
</code></pre>

<div class="admonition warning">
<p class="admonition-title">Don&#39;t be dumb</p>
<p>DO NOT share or publish your empire-chain.pem, empire-priv.key, empire.db, by default these are cleaned within the Dockerfile for you at build.</p>
</div>

<h3 id="dockerfile-build-instructions">Dockerfile Build Instructions</h3>

<p>So you don&rsquo;t trust us to build your image. Fair enough, I truly don&rsquo;t blame you! The following steps should be followed to build the image from scratch or even host your self.</p>

<pre><code>git clone https://github.com/EmpireProject/Empire.git
</code></pre>

<p>Once you have the required source running the following commands to build the <code>Dockerfile</code> which is found in the root of Empire.</p>

<pre><code>./build.sh
</code></pre>

<p>This will set the following ENV variables, and run the docker build process:</p>

<pre><code>#!/usr/bin/env bash
set -ex
# SET THE FOLLOWING VARIABLES
# docker hub username
USERNAME=empireproject
# image name
IMAGE=empire
docker build -t $USERNAME/$IMAGE:latest .
</code></pre>

<p>If you don&rsquo;t want to pull the entire repo local this is also fine, just make sure to place this <code>Dockerfile</code> in the current build directory:</p>

<pre><code># NOTE: Only use this when you want to build image locally
#       else use `docker pull empireproject\empire:{VERSION}`
#       all image versions can be found at: https://hub.docker.com/r/empireproject/empire/

# -----BUILD COMMANDS----
# 1) build command: `docker build -t empireproject/empire .`
# 2) create volume storage: `docker create -v /opt/Empire --name data empireproject/empire`
# 3) run out container: `docker run -ti --volumes-from data empireproject/empire /bin/bash`

# -----RELEASE COMMANDS----
# 1) `USERNAME=empireproject`
# 2) `IMAGE=empire`
# 3) `git pull`
# 4) `export VERSION=&quot;$(curl -s https://raw.githubusercontent.com/EmpireProject/Empire/master/lib/common/empire.py | grep &quot;VERSION =&quot; | cut -d '&quot;' -f2)&quot;`
# 5) `docker tag $USERNAME/$IMAGE:latest $USERNAME/$IMAGE:$VERSION`
# 1) `docker push $USERNAME/$IMAGE:latest`
# 2) `docker push $USERNAME/$IMAGE:$VERSION`

# -----BUILD ENTRY-----

# image base
FROM ubuntu:16.04

# author
MAINTAINER Killswitch-GUI

# extra metadata
LABEL version=&quot;1.0&quot;
LABEL description=&quot;Dockerfile base for Empire server.&quot;

# expose ports for Empire C2 listerners
# EXPOSE 80,443

# update repo sources
RUN apt-get clean
RUN apt-get update

# build depends
RUN apt-get install -qy apt-utils
RUN apt-get install -qy git
RUN apt-get install -qy wget
RUN apt-get install -qy curl
RUN apt-get install -qy sudo
RUN apt-get install -qy lsb-core
RUN apt-get install -qy python2.7
RUN apt-get install -qy python-pip

# cleanup image
RUN apt-get -qy autoremove

# build empire
RUN git clone https://github.com/EmpireProject/Empire.git /opt/Empire
ENV STAGING_KEY=RANDOM
RUN cd /opt/Empire/setup/ &amp;&amp; ./install.sh

# -----END OF BUILD-----
</code></pre>

<p>If you are going to host your own private Docker repo, this is easily done with editing the <code>.release.sh</code> script. Simply replace the push location ENV variables:</p>

<pre><code>#!/usr/bin/env bash
set -ex

# SET THE FOLLOWING VARIABLES
USERNAME=**CHANGME**
IMAGE=empire
VERSION=&quot;$(curl -s https://raw.githubusercontent.com/EmpireProject/Empire/master/lib/common/empire.py | grep &quot;VERSION =&quot; | cut -d '&quot;' -f2)&quot;

# UPDATE THE SOURCE CODE
git pull

# ALERT VERSION
echo &quot;Building Version: $VERSION&quot;

# START BUILD
./.build.sh

# DOCKER TAG/VERSIONING
docker tag $USERNAME/$IMAGE:latest $USERNAME/$IMAGE:$VERSION

# PUSH TO DOCKER HUB
docker push $USERNAME/$IMAGE:latest
echo &quot;Docker image pushed: $USERNAME/$IMAGE:latest&quot;
docker push $USERNAME/$IMAGE:$VERSION
echo &quot;Docker image pushed: $USERNAME/$IMAGE:$VERSION&quot;
</code></pre>


			<aside class="copyright" role="note">
				
				&copy; 2017 Released under BSD 3-clause New/Revised License &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="https://example.org/" title="Introduction">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Introduction
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="https://example.org/overview/" title="Overview">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Overview
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'https:\/\/example.org\/';
      var repo_id  = 'EmpireProject\/Empire';
    
    </script>

    <script src="https://example.org/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

